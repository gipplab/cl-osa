Turkey row: Why has Erdogan riled Nato allies?

Turkey is furious with the Netherlands for having prevented Turkish ministers from rallying support for President Recep Tayyip Erdogan on Dutch soil.
It is very rare for relations between two Nato members to become so toxic. But similar restrictions in Austria and Germany have also soured their relations with Turkey.
Freedom of assembly is enshrined in Article 11 of the European Convention on Human Rights, which all EU member states have to respect.
But that freedom is not unqualified. The article allows authorities to impose restrictions if they believe a rally could be a risk to national security or public safety.
President Erdogan denounced the Netherlands as "Nazi remnants" and a "banana republic" for its restrictions. He also riled Germany earlier by making a comparison with the Nazis.
He is in a hurry to woo Turks living abroad in the run-up to a key constitutional referendum on 16 April. If he wins, he will get sweeping new presidential powers greater than those enjoyed by US or French presidents.
The Netherlands argues that pro-Erdogan campaigning by Turkish ministers risks whipping up tensions, with a Dutch general election set for Wednesday.
The Freedom Party (PVV) of anti-Islam MP Geert Wilders is tipped to poll strongly - and immigration is high among voters' concerns.
The Turkish government accuses the Dutch of violating the Vienna Convention - an international rulebook on diplomatic relations.
Turkey says its Families Minister Fatma Betul Sayan Kaya was not allowed into the consulate, and was then expelled from the country to stop her addressing a pro-Erdogan rally.
The host country can argue, however, that unscheduled, overtly political visits by foreign government officials are an unwelcome breach of diplomatic protocol.
Moreover, Article 94/A of Turkey's electoral law says "no election propaganda can take place" among Turks abroad or at Turkish diplomatic missions. That article was approved in 2008 by Mr Erdogan's AK Party.
It has not bothered Turkish ministers, however, who claim to have a right to speak at Turkish "cultural" events.
Dutch warn citizens after Erdogan threat
Reality Check: Is banning Turkish rallies EU policy?
Turkish-German ties fray as Erdogan seeks votes
The accusation that Europeans are treating Turkey in a racist way, as "second-class", reflects long-running Turkish frustration with the EU. It is a candidate for EU membership, but the negotiations - which began in 2005 - have gone at a glacial pace.
Mr Erdogan is also bitter because, in his view, EU countries showed little or no solidarity with him after the abortive coup against him last July.
A state of emergency remains in force in Turkey. Mr Erdogan says security is his priority because Kurdish rebels, hostile forces in Syria and the Gulen movement all threaten the Turkish state. Europe, in his view, chooses to ignore those perils.
He also accuses Europe of reneging on promises it made - including visa-free travel - when the EU-Turkey deal was agreed in March 2016. That deal cut the flow of illegal migrants into the EU - but meant more of them returning to Turkey.
A brief guide to Turkey's coup
Since the coup attempt, more than 100,000 suspected opponents have been dismissed or imprisoned. Turkey's armed forces, judiciary, police and education system have been purged. Dozens of journalists have been jailed.
A Yes vote in the referendum will further boost Mr Erdogan's powers. Legal experts at Europe's main human rights watchdog, the Council of Europe, say the proposed changes will create an "authoritarian" system, "removing necessary checks and balances".
Why is Turkey holding a referendum?
Turkey says 'No' to saying 'No', ahead of its referendum
Germany hosts the largest Turkish diaspora community - about three million, of whom 1.4m can vote in Turkish elections and referendums.
In the November 2015 Turkish election the vote for the AKP among German Turks was 59.7%. In Turkey itself, the AKP vote was 49.5%.
So Mr Erdogan is very interested in the Turkish diaspora vote.
Turkish ministers were barred from addressing rallies in Gaggenau and Cologne, though Foreign Minister Mevlut Cavusoglu was allowed to address one in Hamburg.
In 2015 the AKP also polled strongly among Turks living in the Netherlands, France and Austria.
More than half of the estimated 400,000 Dutch Turks are registered to vote in Turkey.
The Turkish diaspora in France is reckoned to number more than 600,000, while the figure for Austria is an estimated 300,000.
France allowed Foreign Minister Cavusoglu to address a rally on Sunday in the eastern city of Metz, where he called the Netherlands "the capital of fascism".
Last month Austria banned Erdogan campaign rallies, on the grounds that they could increase friction and hinder integration.
And Denmark has asked Turkish Prime Minister Binali Yildirim to postpone a visit.